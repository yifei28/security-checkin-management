# æ—¥æœŸç­›é€‰è°ƒè¯•æŠ¥å‘Š

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼šå½“é€‰æ‹©"ä»Šå¤©"ä½œä¸ºæ—¶é—´ç­›é€‰æ¡ä»¶æ—¶ï¼Œç­¾åˆ°è®°å½•é¡µé¢ä»ç„¶æ˜¾ç¤ºå…¶ä»–æ—¥æœŸçš„è®°å½•ã€‚

## å‰ç«¯ä»£ç åˆ†æ

### 1. æ—¶é—´æ ¼å¼åŒ–å‡½æ•°

```typescript
const formatLocalDateTime = (date: Date): string => {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  const hours = String(date.getHours()).padStart(2, '0');
  const minutes = String(date.getMinutes()).padStart(2, '0');
  const seconds = String(date.getSeconds()).padStart(2, '0');
  return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}`;
};
```

**åˆ†æ**: âœ… å‡½æ•°æ­£ç¡®ï¼Œç”Ÿæˆä¸å¸¦æ—¶åŒºåç¼€çš„æœ¬åœ°æ—¶é—´æ ¼å¼

### 2. ä»Šå¤©æ—¶é—´èŒƒå›´è®¡ç®—

```typescript
case 'today':
  // ä»Šå¤©çš„å¼€å§‹æ—¶é—´ (00:00:00)
  const today = new Date(now);
  today.setHours(0, 0, 0, 0);
  startDate = formatLocalDateTime(today);
  
  // ä»Šå¤©çš„ç»“æŸæ—¶é—´ (23:59:59)
  const todayEnd = new Date(now);
  todayEnd.setHours(23, 59, 59, 999);
  endDate = formatLocalDateTime(todayEnd);
  break;
```

**åˆ†æ**: âœ… é€»è¾‘æ­£ç¡®ï¼Œç”Ÿæˆä»Šå¤©ä» 00:00:00 åˆ° 23:59:59 çš„æ—¶é—´èŒƒå›´

### 3. APIå‚æ•°æ„å»º

```typescript
if (startDate && endDate) {
  params.append('startDate', startDate);
  params.append('endDate', endDate);
}
```

**åˆ†æ**: âœ… å‚æ•°æ·»åŠ æ­£ç¡®

## æµ‹è¯•ç»“æœ

### å½“å‰æ—¶é—´: 2025-08-10 09:26:29

### ç”Ÿæˆçš„APIå‚æ•°
- startDate: `2025-08-10T00:00:00`
- endDate: `2025-08-10T23:59:59`
- å®Œæ•´URL: `http://localhost:8080/api/checkin?page=1&pageSize=20&sortBy=timestamp&sortOrder=desc&startDate=2025-08-10T00:00:00&endDate=2025-08-10T23:59:59`

### ç­›é€‰é€»è¾‘æµ‹è¯•
| æµ‹è¯•è®°å½• | æ—¶é—´æˆ³ | åº”è¯¥åŒ…å« | å®é™…ç»“æœ | çŠ¶æ€ |
|----------|--------|----------|----------|------|
| ä»Šå¤©ä¸Šåˆ10:30 | 2025-08-10T10:30:00 | âœ… æ˜¯ | âœ… åŒ…å« | âœ… é€šè¿‡ |
| ä»Šå¤©00:00 | 2025-08-10T00:00:00 | âœ… æ˜¯ | âœ… åŒ…å« | âœ… é€šè¿‡ |
| ä»Šå¤©23:59 | 2025-08-10T23:59:59 | âœ… æ˜¯ | âœ… åŒ…å« | âœ… é€šè¿‡ |
| æ˜¨å¤©10:30 | 2025-08-09T10:30:00 | âŒ å¦ | âŒ æ’é™¤ | âœ… é€šè¿‡ |
| æ˜å¤©10:30 | 2025-08-11T10:30:00 | âŒ å¦ | âŒ æ’é™¤ | âœ… é€šè¿‡ |

## ç»“è®º

**å‰ç«¯é€»è¾‘å®Œå…¨æ­£ç¡®** âœ…

é—®é¢˜å¾ˆå¯èƒ½å‡ºç°åœ¨ä»¥ä¸‹ä½ç½®ï¼š

### 1. åç«¯APIå¤„ç† (æœ€å¯èƒ½)
- åç«¯å¯èƒ½æ²¡æœ‰æ­£ç¡®å¤„ç† `startDate` å’Œ `endDate` å‚æ•°
- åç«¯å¯èƒ½æœ‰æ—¶åŒºè½¬æ¢é—®é¢˜
- åç«¯SQLæŸ¥è¯¢å¯èƒ½æœ‰é€»è¾‘é”™è¯¯

### 2. ç½‘ç»œä¼ è¾“
- URLç¼–ç /è§£ç é—®é¢˜
- ä»£ç†æœåŠ¡å™¨é…ç½®é—®é¢˜

### 3. æ•°æ®åº“æ—¶é—´æ ¼å¼
- æ•°æ®åº“å­˜å‚¨çš„æ—¶é—´æ ¼å¼ä¸é¢„æœŸä¸ç¬¦
- æ—¶åŒºé…ç½®ä¸ä¸€è‡´

## è§£å†³å»ºè®®

### ç«‹å³æªæ–½
1. **æ·»åŠ ç½‘ç»œè¯·æ±‚æ—¥å¿—** - åœ¨å‰ç«¯è®°å½•å®é™…å‘é€çš„APIè¯·æ±‚
2. **æ·»åŠ å“åº”æ—¥å¿—** - è®°å½•åç«¯è¿”å›çš„æ•°æ®
3. **åœ¨UIä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯** - è®©ç”¨æˆ·èƒ½çœ‹åˆ°å½“å‰çš„ç­›é€‰å‚æ•°

### åç«¯è°ƒè¯•
1. æ£€æŸ¥åç«¯æ—¥å¿—ï¼Œç¡®è®¤æ”¶åˆ°çš„å‚æ•°
2. åœ¨åç«¯æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼Œè®°å½•SQLæŸ¥è¯¢
3. éªŒè¯æ•°æ®åº“ä¸­çš„æ—¶é—´æ ¼å¼

### æ•°æ®éªŒè¯
1. ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œç¡®è®¤æ—¶é—´å­˜å‚¨æ ¼å¼
2. éªŒè¯åç«¯æ—¶åŒºé…ç½®
3. æµ‹è¯•ä¸åŒæ—¶é—´èŒƒå›´çš„ç­›é€‰ç»“æœ

## å‰ç«¯æ”¹è¿›å»ºè®®

### 1. æ·»åŠ è°ƒè¯•UI (å·²å®ç°)
- åˆ›å»ºè°ƒè¯•é¡µé¢ `/admin/debug-date-filter`
- æ˜¾ç¤ºå½“å‰ç­›é€‰å‚æ•°å’ŒAPI URL

### 2. å¢å¼ºé”™è¯¯æç¤º
- åœ¨ç­›é€‰æ— æ•ˆæ—¶æ˜¾ç¤ºæ˜ç¡®æç¤º
- æä¾›é‡æ–°åŠ è½½å’Œæ¸…é™¤ç­›é€‰çš„é€‰é¡¹

### 3. æ·»åŠ è¯·æ±‚ç›‘æ§
- è®°å½•æ‰€æœ‰APIè¯·æ±‚çš„å‚æ•°å’Œå“åº”
- åœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤ºç½‘ç»œè°ƒè¯•ä¿¡æ¯

## å½“å‰å·²å®ç°çš„è°ƒè¯•å·¥å…·

1. **DateFilterDebugç»„ä»¶** - `/admin/debug-date-filter`
2. **testDateFilteringå‡½æ•°** - æ§åˆ¶å°è°ƒè¯•è¾“å‡º
3. **debug-api-params.js** - ç‹¬ç«‹æµ‹è¯•è„šæœ¬
4. **test-date-filter.html** - æµè§ˆå™¨æµ‹è¯•é¡µé¢

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… å‰ç«¯é€»è¾‘éªŒè¯å®Œæˆ
2. ğŸ”„ **å½“å‰ä»»åŠ¡**: æ·»åŠ ç½‘ç»œè¯·æ±‚ç›‘æ§å’Œæ—¥å¿—
3. â³ **å¾…åŠ**: åç«¯APIè°ƒè¯•
4. â³ **å¾…åŠ**: æ•°æ®åº“æ—¶é—´æ ¼å¼éªŒè¯

---

**æ›´æ–°æ—¶é—´**: 2025-08-10 09:26  
**çŠ¶æ€**: å‰ç«¯è°ƒè¯•å®Œæˆï¼Œé—®é¢˜å®šä½ä¸ºåç«¯å¤„ç†